"use strict";!function(r){var c,s,e,i=r(".jupiterx-nav"),o=r(".jupiterx-content"),a=r(window),u={};c=function(t,n){return _.isObject(t)&&(t=(n=_.extend(t,{})).data.action),(n=_.defaults(n||{},{type:"POST",url:_wpUtilSettings.ajax.url})).data=_.extend(n.data||{},{action:"jupiterx_setup_wizard_"+t}),r.ajax(n)},s=function(){c({data:{action:"next_page"},success:function(t){var n=t.data;o.hide().attr("class","jupiterx-content").addClass("jupiterx-"+n.page).html(n.html).fadeIn(500),i.trigger("next.owl.carousel"),a.trigger("content-loaded",n.page)}})},e=function(){o.find(".jupiterx-next").on("click",function(t){t.preventDefault(),r(this).button("loading"),s()})},r.fn.button=function(n,e){this.each(function(){var t=r(this);switch(n){case"loading":t.attr("disabled","disabled"),e||t.append('<i class="fa fa-circle-notch fa-spin"></i>');break;case"default":t.removeAttr("disabled").find(".fa").remove()}})},r.fn.alert=function(i){return this.each(function(){var t=r(this),n=wp.template("jupiterx-alert"),e=r(n(i));t.find(".alert").remove(),t.prepend(e),a.scrollTop(e.position().top-30)}),this},r.fn.blockUi=function(){return this.each(function(){r(this).addClass("jupiterx-block-ui")}),this},r.fn.unblockUi=function(){return this.each(function(){r(this).removeClass("jupiterx-block-ui")}),this},r.fn.overlaySpinner=function(){return this.each(function(){r(this).addClass("jupiterx-overlay-spinner").append(wp.template("jupiterx-spinner")())}),this},r.fn.removeOverlaySpinner=function(){return this.each(function(){r(this).removeClass("jupiterx-overlay-spinner").find(".jupiterx-spinner-container").remove()}),this},u["api-activation"]={init:function(){var e=o.find(".jupiterx-form"),i=e.find("button.jupiterx-activate"),n=e.find("input[type=text]");i.on("click",function(t){t.preventDefault(),c({data:{action:"activate_api",api_key:n.val()},beforeSend:function(){i.button("loading")}}).success(function(t){var n=t.data;n.status?s():(i.button("default"),e.alert({message:n.message,type:"danger"}))})})}},u.plugins={init:function(){var i=o.find(".jupiterx-form"),a=i.find(".jupiterx-plugins-list"),u=i.find("button.btn");u.on("click",function(t){t.preventDefault();var n=i.find("input[type=checkbox]:checked"),e=[];n.each(function(){e.push(r(this).val())}),c({data:{action:"install_plugins",plugins:e},beforeSend:function(){u.button("loading"),a.blockUi()}}).success(function(t){t.hasOwnProperty("install")?r.ajax({type:"POST",url:t.url,data:t.install,success:function(t){c({data:{action:"activate_plugins",plugins:e}}).success(function(t){t.hasOwnProperty("activate")&&r.ajax({type:"POST",url:t.url,data:t.activate,success:function(t){s()}})})}}):c({data:{action:"activate_plugins",plugins:e}}).success(function(t){t.hasOwnProperty("activate")&&r.ajax({type:"POST",url:t.url,data:t.activate,success:function(t){s()}})})})})}},u.templates={init:function(){jupiterx.templates&&jupiterx.templates.init(),a.on("template-installed",function(){s()})}},i.owlCarousel({center:!0,items:3,loop:!1,dots:!1,nav:!1,mouseDrag:!1,touchDrag:!1,pullDrag:!1,startPosition:jupiterxWizardSettings.currentPageIndex}),a.on("content-loaded",function(t,n){e(),n&&u[n]&&_.isFunction(u[n].init)&&u[n].init()}),a.trigger("content-loaded",jupiterxWizardSettings.currentPage)}(jQuery);