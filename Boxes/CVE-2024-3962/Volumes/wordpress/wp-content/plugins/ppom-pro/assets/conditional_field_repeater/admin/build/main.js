jQuery((function(t){const e='select[data-metatype="origin"]';t(document).on("click",".ppom_cfr_enable input[type=checkbox]",(e=>{a(t(e.target))}));const n=e=>{var n;const i=e.val(),a=null===(n=t(`input[data-metatype="data_name"][value="${i}"]`))||void 0===n?void 0:n.parents(".ppom-fields-actions").find('input[data-metatype="type"]').val();if(!i)return void e.siblings(".magic-tags").hide();e.siblings(".magic-tags").show();const o=e.siblings(".magic-tags").find(".mt-option_title");["quantities","qtypack"].includes(a)?o.show():o.hide()};t(document).on("change",".ppom-field-repeat-origin",(e=>{const i=t(e.target);n(i)})),t(document).on("click",".ppom-field-repeater-tab-js",(e=>{e.preventDefault(),a(t(e.target).parents(".ppom-fields-actions").find(`input[data-metatype="${conditionalFieldRepater.constants.SETTING_KEY_ENABLE}"]`)),o(),p()})),t(document).on("ppom_new_field_created",(function(n,i,a){const o=t(i).find(e),p=`ppom[${a}][${conditionalFieldRepater.constants.SETTING_KEY_FORM}][${o.attr("data-metatype")}]`;o.attr("name",p)}));let i=[];const a=e=>{const n=t(e).is(":checked");e.parents(".ppom-slider").find(".ppom_cfr_setup_form").css("visibility",n?"visible":"hidden")},o=()=>{i=[],t(".ppom-slider").each((function(e,n){const a=t(n),o=a.find('input[data-metatype="title"]').val(),p=a.find('input[data-metatype="data_name"]').val(),c=a.find('input[data-metatype="type"]').val();if(""!==t.trim(p)&&["number","quantities","qtypack"].includes(c)){if(i.filter((t=>t.value===p)).length>0)return;i.push({title:o,value:p})}}))},p=()=>{t(".ppom-slider").each((function(){const a=t(this).is(":visible");var o=t(this).find('input[data-metatype="data_name"]').val();if(!a&&""===t.trim(o))return;const p=t(this).find(e);(e=>{e.html("");const n=`<option value="">${conditionalFieldRepater.i18n.none}</option>`;t(n).appendTo(e)})(p);const c=p.attr("data-existingvalue");for(const e of i){const n=c===e.value?"selected ":"";if(e.value===o)continue;const i="<option "+n+'value="'+e.value+'">'+e.title+"</option>";t(i).appendTo(p)}n(p)}))};t(document).on("click",".ppom-copy-to-clipboard",(t=>{t.preventDefault();const e=t.target.textContent;navigator.clipboard.writeText(e).then((()=>alert(`${conditionalFieldRepater.i18n.text_copied}:${e}`)))})),t(document).on("change",".ppom-field-repeat-origin",(function(e){e.preventDefault();var n=t(this).val();t(this).attr("data-existingvalue",n)}))}));