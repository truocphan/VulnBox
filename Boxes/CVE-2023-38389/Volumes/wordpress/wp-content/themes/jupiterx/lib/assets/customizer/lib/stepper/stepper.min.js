!function(e,t,i,s){"use strict";var n="stepper",h={selectorProgressBar:".stepper-progress",selectorInputNumber:".stepper-number",classNameChanging:"is-changing",value:"",decimals:0,min:0,max:100,step:1,unit:""};function u(t,i){this.element=t,this.settings=e.extend({},h,i),this._defaults=h,this._name=n,this.init()}e.extend(u.prototype,{init:function(){this._curDown=!1,this._mouseDownX=0,this._mouseDownValue=0,this.$el=e(this.element),this.$input=this.$el,this.$progress=this.$el.find(this.settings.selectorProgressBar),this.decimals=this.$input.attr("decimals")||this.settings.decimals,this.min=this.$input.attr("min")||this.settings.min,this.max=this.$input.attr("max")||this.settings.max,this.step=this.$input.attr("step")||this.settings.step,this.unit=this.$input.attr("unit")||this.settings.unit,this.value=this.$input.val()||this.settings.value,this.setValue(this.value),this.$input.on("keydown",this.onKeyPress.bind(this)),this.$input.on("blur",this.onBlur.bind(this)),this.$input.on("paste input",this.onChange.bind(this)),this.$el.on("mousedown touchstart",this.onMouseDown.bind(this)),this.$el.on("wheel",this.onMouseWheel.bind(this)),this.$el.on("keydown",this.onKeydown.bind(this)),this.$el.on("mouseup touchend",this.onMouseUp.bind(this)),this.$input.on("stepper.destroy",this.destroy.bind(this))},destroy:function(t,i){this.$input.off("keydown"),this.$input.off("blur"),this.$input.off("paste input"),this.$el.off("mousedown touchstart"),this.$el.off("wheel"),this.$el.off("keydown"),this.$el.off("mouseup touchend"),e.isNumeric(this.getValue())&&"px"==i&&this.setValue(Math.round(this.getValue()))},onMouseDown:function(t){this._mouseDownX=t.clientX||t.originalEvent.touches[0].clientX,this._changeStart()},onMouseUp:function(t){if(!e.isNumeric(this.getValue()))return!1;this._changeEnd()},onMouseMove:function(t){if(!e.isNumeric(this.getValue()))return!1;if(!0===this._curDown){var i=(t.clientX||t.originalEvent.touches[0].clientX)-this._mouseDownX;this.setValue(this._mouseDownValue+i*this.step)}},onMouseWheel:function(t){var i=this.getValue();if(!e.isNumeric(i)&&i.length)return!1;if(this.$input.is(":focus")){t.preventDefault();var s=t.originalEvent.deltaY<0?1:-1;this.setValue(this.getValue()+s*this.step)}},onKeydown:function(t){if(38==t.which||40==t.which){var i=this.getValue();if(!e.isNumeric(i)&&i.length)return!1;if(!this.$input.is(":focus"))return!1;38==t.which&&this.setValue(this.getValue()+1*this.step),40==t.which&&this.setValue(this.getValue()-1*this.step)}},onChange:function(t){this._updateProgress(this.getValue())},onBlur:function(t){this._changeEnd(),this.setValue(this.getValue())},onKeyPress:function(t){13===t.keyCode&&this.$input.blur()},getValue:function(){var t=this.$input.val();return e.isNumeric(t)?parseFloat(t)||0:t},setValue:function(t){var i;if(e.isNumeric(t)){i=Math.max(Math.min(t,this.max),this.min);var s=i=this._roundValue(i);return s+=this.unit,this.$input.val(s),void this._updateProgress(i)}"auto"!=t&&(t=""),this.$input.val(t),this._updateProgress(i)},_updateProgress:function(t){var i=this._valueToPercent(t)/100;this.$progress.css("transform","scaleX("+i+")"),this.$input.trigger("change")},_percentToValue:function(t){return this.min+t/100*(this.max-this.min)},_valueToPercent:function(t){var i=(t-this.min)/(this.max-this.min)*100;return Math.max(Math.min(i,100),0)},_roundValue:function(t){var i=Math.pow(10,2);return Math.round(t*i)/i},_changeStart:function(){this._curDown=!0,this.$el.addClass(this.settings.classNameChanging)},_changeEnd:function(){this._curDown=!1,this.$el.removeClass(this.settings.classNameChanging)}}),e.fn[n]=function(t){return this.each(function(){e.data(this,"plugin-"+n,new u(this,t))})}}(jQuery,window,document);
