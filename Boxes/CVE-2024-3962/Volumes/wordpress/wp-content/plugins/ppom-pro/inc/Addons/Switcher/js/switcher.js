jQuery(function($) {

	if ($('input.switcher:checked').length > 0) {

		var checked_switch = $('input.switcher:checked');
		$.each(checked_switch, function(index, item){
			var checked_s = $(item);
			var pos = checked_s.closest('.ppom-radio-group').position();
			var width = checked_s.closest('.ppom-radio-group').width();
	
			checked_s.closest('.ppom-switcher-option-group').find('.ppom-option-marker').css('transform', `translateX(${pos.left}px)`);
			checked_s.closest('.ppom-switcher-option-group').find('.ppom-option-marker').css('width', `${width}px`);	
		
		});
	}

	$('input.switcher').on('change', function(e) {
		// console.log('i');

		const percentage = $(this).attr('data-css-transform');
		// console.log(percentage);
		// $('.img-thumbnail').toggle();

		var pos = $(this).closest('.ppom-radio-group').position();
		var width = $(this).closest('.ppom-radio-group').width();
		// console.log(pos.left, width);

		$(this).closest('.ppom-switcher-option-group').find('.ppom-option-marker').css('transform', `translateX(${pos.left}px)`);
		$(this).closest('.ppom-switcher-option-group').find('.ppom-option-marker').css('width', `${width}px`);
		// Update product image
		const image_src = $(this).attr('data-image');
		if (image_src !== ''){
			$('figure img:first').attr('src', image_src);
		}

	});
	
	$(document).bind('ppom_field_hidden', function(e) {
		
		var element_type = ppom_get_field_type_by_id(e.field);
		
		if( element_type !== 'switcher' ) return;
		
    	$('input[name="ppom[fields][' + e.field + ']"]').prop('checked', false);
	});
	// $('.indicator').on('change', function(e) {

	// const percentage = $(this).attr('data-css-transform');
	// console.log(percentage);
	// })

})
// woocommerce-product-gallery__image
